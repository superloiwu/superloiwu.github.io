---
layout: post
title:  "微信支付场景备忘"
date:   2017-3-23 8:00:00 +0800
published:  true
categories: loiwu update
---

公众号支付场景总结

描述:

我们的场景总结是微信公众号支付的情景。（客户都是提供公众号）

A、 客户不提供域名

a)         付款到客户公众号的微信支付

b)         付款到我们公司的微信支付

B、 客户提供域名

a)         付款给客户公众号的微信支付

b)         付款到我们公司的微信支付




客户不提供域名
付款到客户公众号

场景描述：

此场景是，客户不提供域名，那么我们提供域名例如（xx.xxx.com.cn）,此时的支付流程为：

用户在公众号发起支付申请，调用微信支付，客户自己的公众号上的网页授权获取openid的域名设为xx.xxx.com.cn。在往后的支付的进行的openid就可以直接获取了。此支付可以正常进行。(说明：微信公众号上的网页授权域名和我们给客户提供的一致即可)
付款到我们公司的公众号

场景描述:

此场景是，客户不提供域名，那么我们提供域名例如（xx.xxx.com.cn）,此时的支持流程为:

用户在公众号发起支付申请，调用微信支付。(说明：微信公众号上的网页授权域名是我们公司的某个一级域名（例如:xxx.com）和我们给客户提供的域名都在一个host下即可)
客户提供域名
付款到客户公众号

场景描述:

此场景是，客户提供域名,付款到客户的公众号

此时的支持流程为:

用户在公众号发起支付申请，调用微信支付，客户自己的公众号上的网页授权获取openid的域名设为xxx.kehu.com。在往后的支付的进行的openid就可以直接获取了。此支付可以正常进行。(说明：客户微信公众号上的网页授权域名和客户提供的域名一致即可)
付款到我们公司的公众号

场景描述:

此场景是，客户提供域名,付款到我们的公众号

此时的支持流程为:

用户在公众号发起支付申请，调用微信支付，客户自己的公众号上的网页授权获取的openid应该是我们的公司的公众号，所以要进行一次绕取openid.然后在进行相关的支付。(说明：我们微信公众号上的网页授权域名和客户提供的域名不一致)
